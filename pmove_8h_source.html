<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenMW: libs/openengine/bullet/pmove.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>libs/openengine/bullet/pmove.h</h1><a href="pmove_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef OENGINE_BULLET_PMOVE_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define OENGINE_BULLET_PMOVE_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="comment">/*</span>
<a name="l00004"></a>00004 <span class="comment">This source file is a *modified* version of various header files from the Quake 3 Arena source code,</span>
<a name="l00005"></a>00005 <span class="comment">which was released under the GNU GPL (v2) in 2005.</span>
<a name="l00006"></a>00006 <span class="comment">Quake 3 Arena is copyright (C) 1999-2005 Id Software, Inc.</span>
<a name="l00007"></a>00007 <span class="comment">*/</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;Ogre.h&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;OgreMath.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="trace_8h.html">trace.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="physic_8hpp.html">physic.hpp</a>&quot;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">//#include &quot;GameMath.h&quot;</span>
<a name="l00017"></a>00017 <span class="comment">//#include &quot;GameTime.h&quot;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="comment">// Forwards-declare it!</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="comment">/*#ifndef COMPILING_PMOVE</span>
<a name="l00022"></a>00022 <span class="comment">#include &quot;Scene.h&quot;</span>
<a name="l00023"></a>00023 <span class="comment">extern SceneInstance* global_lastscene;</span>
<a name="l00024"></a>00024 <span class="comment">#endif*/</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">static</span> <span class="keyword">const</span> Ogre::Vector3 <a class="code" href="pmove_8h.html#a90e7f6725fa10a6e2512e7d6dd50a1d0">halfExtents</a>(14.64f * 2, 14.24f * 2, 33.25f * 2);
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="pmove_8h.html#a1cb2ac25ccfb31c7c98e9971a95cd497">00028</a> <span class="preprocessor">#define MAX_CLIP_PLANES 5</span>
<a name="l00029"></a><a class="code" href="pmove_8h.html#a417156250cdfc78acc795e76e5044750">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define OVERCLIP 1.001f</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="comment">//#define       STEPSIZE 18 // 18 is way too much</span>
<a name="l00031"></a><a class="code" href="pmove_8h.html#a0b31438dd90256ed47b3bea0eb62be06">00031</a> <span class="preprocessor">#define STEPSIZE (18 / 2)</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#ifndef M_PI</span>
<a name="l00033"></a><a class="code" href="pmove_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">00033</a> <span class="preprocessor"></span><span class="preprocessor">        #define M_PI 3.14159265358979323846f</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00035"></a><a class="code" href="pmove_8h.html#ac71b1e54b98dc1031873048bc61d0438">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define YAW 0</span>
<a name="l00036"></a><a class="code" href="pmove_8h.html#acd633835a520a62245ec6cfeb6d00e97">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define PITCH </span><span class="comment">/*1*/</span>2
<a name="l00037"></a><a class="code" href="pmove_8h.html#af902416f65138704a180dbae2dc9d8f2">00037</a> <span class="preprocessor">#define ROLL </span><span class="comment">/*2*/</span>1
<a name="l00038"></a><a class="code" href="pmove_8h.html#a0f0ce7f23acb85acbb294df5bccb5516">00038</a> <span class="preprocessor">#define SHORT2ANGLE(x) ( (x) * (360.0f / 65536.0f) )</span>
<a name="l00039"></a><a class="code" href="pmove_8h.html#a7dd2d70a40b5d13ec3cdb2c13d740f87">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define ANGLE2SHORT(x) ( (const short)( (x) / (360.0f / 65536.0f) ) )</span>
<a name="l00040"></a><a class="code" href="pmove_8h.html#a674763dac6c5d9defd5165e2d196b7a4">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define GENTITYNUM_BITS 10 // don&#39;t need to send any more</span>
<a name="l00041"></a><a class="code" href="pmove_8h.html#afdd63aab2146c4bc1bceb8237bb75fb7">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_GENTITIES (1 &lt;&lt; GENTITYNUM_BITS)</span>
<a name="l00042"></a><a class="code" href="pmove_8h.html#aa684040d7aebb90b780e2169fbe326e9">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define ENTITYNUM_NONE (MAX_GENTITIES - 1)</span>
<a name="l00043"></a><a class="code" href="pmove_8h.html#a4ff14b0afed62af668e315b9a1a6ccf8">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define ENTITYNUM_WORLD (MAX_GENTITIES - 2)</span>
<a name="l00044"></a><a class="code" href="pmove_8h.html#afb21b82f6ff208e590e80228510b8120">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define MIN_WALK_NORMAL 0.7f // can&#39;t walk on very steep slopes</span>
<a name="l00045"></a><a class="code" href="pmove_8h.html#a9365a65e296147ddf7e8bc6a48d9a966">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define JUMP_VELOCITY (270)</span>
<a name="l00046"></a><a class="code" href="pmove_8h.html#aef68961211b3e8b4f0228ea002dacc7c">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define PS_PMOVEFRAMECOUNTBITS 6</span>
<a name="l00047"></a><a class="code" href="pmove_8h.html#a717058488d82a7f1a82b1257e2fb5d70">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define MINS_Z -24</span>
<a name="l00048"></a><a class="code" href="pmove_8h.html#a81fc1e3fec79bf37b80270b632486420">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_VIEWHEIGHT 26</span>
<a name="l00049"></a><a class="code" href="pmove_8h.html#af5b6b577edab55591289ee3eaff557bd">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define CROUCH_VIEWHEIGHT 12</span>
<a name="l00050"></a><a class="code" href="pmove_8h.html#a332216b857673b08ce98cd038a473d04">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define DEAD_VIEWHEIGHT (-16)</span>
<a name="l00051"></a><a class="code" href="pmove_8h.html#a9b61ab90973e8137f342425ab3191cbe">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTENTS_SOLID                  1               // an eye is never valid in a solid</span>
<a name="l00052"></a><a class="code" href="pmove_8h.html#a4822e1693851ba9c47eabd1aea1ffbdd">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTENTS_LAVA                   8</span>
<a name="l00053"></a><a class="code" href="pmove_8h.html#ac74aa6092339c35717e12dc058040a01">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTENTS_SLIME                  16</span>
<a name="l00054"></a><a class="code" href="pmove_8h.html#ade922e5f0b8f2b02147858c2b6d579cc">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTENTS_WATER                  32</span>
<a name="l00055"></a><a class="code" href="pmove_8h.html#a05c596817b2aba376b069f8ebbef075d">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTENTS_FOG                    64</span>
<a name="l00056"></a><a class="code" href="pmove_8h.html#a9cf095809fab5be0622a20e85ebc5bb3">00056</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#a9cf095809fab5be0622a20e85ebc5bb3">pm_accelerate</a> = 10.0f;
<a name="l00057"></a><a class="code" href="pmove_8h.html#ac0f7c75d39acfd45336d64589553108b">00057</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#ac0f7c75d39acfd45336d64589553108b">pm_stopspeed</a> = 100.0f;
<a name="l00058"></a><a class="code" href="pmove_8h.html#af907a86f734ad83181503ff2a9d9eb04">00058</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#af907a86f734ad83181503ff2a9d9eb04">pm_friction</a> = 12.0f;
<a name="l00059"></a><a class="code" href="pmove_8h.html#a786db9431d74ec32e549ee044dade2ce">00059</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>  <a class="code" href="pmove_8h.html#a786db9431d74ec32e549ee044dade2ce">pm_flightfriction</a> = 3.0f;
<a name="l00060"></a><a class="code" href="pmove_8h.html#a0cf7997754996f05cda9424187ea5b82">00060</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#a0cf7997754996f05cda9424187ea5b82">pm_waterfriction</a> = 1.0f;
<a name="l00061"></a><a class="code" href="pmove_8h.html#ac949a0dfbb352611bf9d03c8f0e7709a">00061</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#ac949a0dfbb352611bf9d03c8f0e7709a">pm_airaccelerate</a> = 1.0f;
<a name="l00062"></a><a class="code" href="pmove_8h.html#a8d98235fca00e5797e2fa6b9a355e39b">00062</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#a8d98235fca00e5797e2fa6b9a355e39b">pm_swimScale</a> = 0.50f;
<a name="l00063"></a><a class="code" href="pmove_8h.html#a8108e95c4dcbd865b8958fed389964a5">00063</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#a8108e95c4dcbd865b8958fed389964a5">pm_duckScale</a> = 0.25f;
<a name="l00064"></a><a class="code" href="pmove_8h.html#af1ee104d2aeb46ac7bfab97e10ef7a92">00064</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>  <a class="code" href="pmove_8h.html#af1ee104d2aeb46ac7bfab97e10ef7a92">pm_flyaccelerate</a> = 8.0f;
<a name="l00065"></a><a class="code" href="pmove_8h.html#a80323b09605ec010ac344b06b2adf07d">00065</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span>      <a class="code" href="pmove_8h.html#a80323b09605ec010ac344b06b2adf07d">pm_wateraccelerate</a> = 4.0f;
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0">00067</a> <span class="keyword">enum</span> <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0">pmtype_t</a>
<a name="l00068"></a>00068 {
<a name="l00069"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0aac1f79ea46827121e544117c81c1158f">00069</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0aac1f79ea46827121e544117c81c1158f">PM_NORMAL</a>,              <span class="comment">// can accelerate and turn</span>
<a name="l00070"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a2b0dec98e1d2302b9bacf55a05a2a60f">00070</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a2b0dec98e1d2302b9bacf55a05a2a60f">PM_NOCLIP</a>,              <span class="comment">// noclip movement</span>
<a name="l00071"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a83ee12d2b0451196d6cb545e4198730b">00071</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a83ee12d2b0451196d6cb545e4198730b">PM_SPECTATOR</a>,   <span class="comment">// still run into walls</span>
<a name="l00072"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a9c831daf8869caea61d3e0df8ac40c67">00072</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a9c831daf8869caea61d3e0df8ac40c67">PM_DEAD</a>,                <span class="comment">// no acceleration or turning, but free falling</span>
<a name="l00073"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a30bb88735873d4616de817f79a1a49bb">00073</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a30bb88735873d4616de817f79a1a49bb">PM_FREEZE</a>,              <span class="comment">// stuck in place with no control</span>
<a name="l00074"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0aba265ba89558d1fd162bf634b9bc485a">00074</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0aba265ba89558d1fd162bf634b9bc485a">PM_INTERMISSION</a>,        <span class="comment">// no movement or status bar</span>
<a name="l00075"></a><a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a13d36ac2a5d8f48d22d554f881d3049d">00075</a>         <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a13d36ac2a5d8f48d22d554f881d3049d">PM_SPINTERMISSION</a>       <span class="comment">// no movement or status bar</span>
<a name="l00076"></a>00076 };
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5">00078</a> <span class="keyword">enum</span> <a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5">waterlevel_t</a>
<a name="l00079"></a>00079 {
<a name="l00080"></a><a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5a68dfaebef6f723b77459c31c05722295">00080</a>         <a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5a68dfaebef6f723b77459c31c05722295">WL_DRYLAND</a> = 0,
<a name="l00081"></a><a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5abf0da225225396696c09112f167b08e5">00081</a>         <a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5abf0da225225396696c09112f167b08e5">WL_ANKLE</a>,
<a name="l00082"></a><a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5a86d822a528a31a8a3e09f7e75db7afb6">00082</a>         <a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5a86d822a528a31a8a3e09f7e75db7afb6">WL_WAIST</a>,
<a name="l00083"></a><a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5a8f192bf94641cbc5f6890d75ba08b419">00083</a>         <a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5a8f192bf94641cbc5f6890d75ba08b419">WL_UNDERWATER</a>
<a name="l00084"></a>00084 };
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="comment">//#include &quot;bprintf.h&quot;</span>
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="structplayerMove.html">00089</a> <span class="keyword">struct </span><a class="code" href="structplayerMove.html">playerMove</a>
<a name="l00090"></a>00090 {
<a name="l00091"></a><a class="code" href="structplayerMove_1_1playerStruct.html">00091</a>         <span class="keyword">struct </span><a class="code" href="structplayerMove_1_1playerStruct.html">playerStruct</a>
<a name="l00092"></a>00092         {
<a name="l00093"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a32b1d20c73b0354f81cd9225fafe0dfe">00093</a>                 <a class="code" href="structplayerMove_1_1playerStruct.html#a32b1d20c73b0354f81cd9225fafe0dfe">playerStruct</a>() : <a class="code" href="structplayerMove_1_1playerStruct.html#ac9326788ac14315eb7724ad819c3e58b">gravity</a>(800.0f), <a class="code" href="structplayerMove_1_1playerStruct.html#a8d5dee62f5a70f14475a52c4695e1566">speed</a>(480.0f), <a class="code" href="structplayerMove_1_1playerStruct.html#a02ba92eba8ea718984e099ea8afb9981">pmove_framecount</a>(20), <a class="code" href="structplayerMove_1_1playerStruct.html#a7404d961d37203bb3e8f00f2a37d6c64">groundEntityNum</a>(<a class="code" href="pmove_8h.html#aa684040d7aebb90b780e2169fbe326e9">ENTITYNUM_NONE</a>), <a class="code" href="structplayerMove_1_1playerStruct.html#a2fa3c02f9818d436171f56177272a143">commandTime</a>(40), <a class="code" href="structplayerMove_1_1playerStruct.html#a19e346f4f0d652912afb48f36491a630">move_type</a>(<a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0a2b0dec98e1d2302b9bacf55a05a2a60f">PM_NOCLIP</a>), <a class="code" href="structplayerMove_1_1playerStruct.html#ae3f5b8273f49106eee6e3b29525cb864">pm_time</a>(0), <a class="code" href="structplayerMove_1_1playerStruct.html#a04add2c9f4f7c61d9ab5dc874c28a92c">snappingImplemented</a>(true), <a class="code" href="structplayerMove_1_1playerStruct.html#ab45368a0c2a6e167829d6a667af9ae19">bSnap</a>(false), <a class="code" href="structplayerMove_1_1playerStruct.html#aed80b23e3c6019d420bb71fce994c489">counter</a>(-1)
<a name="l00094"></a>00094                 {
<a name="l00095"></a>00095                         <a class="code" href="structplayerMove_1_1playerStruct.html#a2338e55012df6bf152d11b706324ccdd">origin</a> = Ogre::Vector3(733.164f,900.0f, 839.432f);
<a name="l00096"></a>00096                         <a class="code" href="structplayerMove_1_1playerStruct.html#a3b43b0e7321106c43e785fcee5d74075">velocity</a> = Ogre::Vector3(0.0f, 0.0f, 0.0f);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098                         <a class="code" href="structplayerMove_1_1playerStruct.html#ab113fc36a71188bf48c4e6d930d3a239">viewangles</a> = Ogre::Vector3(0.0f, 0.0f, 0.0f);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100                         <a class="code" href="structplayerMove_1_1playerStruct.html#a69f0e7575a42c36ba82d9f18c7b51987">delta_angles</a>[0] = <a class="code" href="structplayerMove_1_1playerStruct.html#a69f0e7575a42c36ba82d9f18c7b51987">delta_angles</a>[1] = <a class="code" href="structplayerMove_1_1playerStruct.html#a69f0e7575a42c36ba82d9f18c7b51987">delta_angles</a>[2] = 0;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102                         <a class="code" href="structplayerMove_1_1playerStruct.html#a1e4a7c2baac715883856d144807eda6e">lastframe_origin</a>.x = <a class="code" href="structplayerMove_1_1playerStruct.html#a1e4a7c2baac715883856d144807eda6e">lastframe_origin</a>.y = <a class="code" href="structplayerMove_1_1playerStruct.html#a1e4a7c2baac715883856d144807eda6e">lastframe_origin</a>.z = 0;
<a name="l00103"></a>00103                         <a class="code" href="structplayerMove_1_1playerStruct.html#a88bc637c3ce84abf9d7fe75f2f6b6fd2">lerp_multiplier</a>.x = <a class="code" href="structplayerMove_1_1playerStruct.html#a88bc637c3ce84abf9d7fe75f2f6b6fd2">lerp_multiplier</a>.y = <a class="code" href="structplayerMove_1_1playerStruct.html#a88bc637c3ce84abf9d7fe75f2f6b6fd2">lerp_multiplier</a>.z = 0;
<a name="l00104"></a>00104                 }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a4cec3976a1c908c1e2a7e344e710618c">00106</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a4cec3976a1c908c1e2a7e344e710618c">SpeedUp</a>(<span class="keywordtype">void</span>)
<a name="l00107"></a>00107                 {
<a name="l00108"></a>00108                         <span class="comment">//printf(&quot;speed up to: %f\n&quot;, speed);</span>
<a name="l00109"></a>00109                         <a class="code" href="structplayerMove_1_1playerStruct.html#a8d5dee62f5a70f14475a52c4695e1566">speed</a> *= 1.25f;
<a name="l00110"></a>00110                 }
<a name="l00111"></a>00111 
<a name="l00112"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a17762b6d224f2b27f1e27838d99b4b5a">00112</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a17762b6d224f2b27f1e27838d99b4b5a">SpeedDown</a>(<span class="keywordtype">void</span>)
<a name="l00113"></a>00113                 {
<a name="l00114"></a>00114                         <span class="comment">//printf(&quot;speed down to %f\n&quot;, speed);</span>
<a name="l00115"></a>00115                         <a class="code" href="structplayerMove_1_1playerStruct.html#a8d5dee62f5a70f14475a52c4695e1566">speed</a> /= 1.25f;
<a name="l00116"></a>00116                 }
<a name="l00117"></a>00117 
<a name="l00118"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a3b43b0e7321106c43e785fcee5d74075">00118</a>                 Ogre::Vector3 <a class="code" href="structplayerMove_1_1playerStruct.html#a3b43b0e7321106c43e785fcee5d74075">velocity</a>;
<a name="l00119"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a2338e55012df6bf152d11b706324ccdd">00119</a>                 Ogre::Vector3 <a class="code" href="structplayerMove_1_1playerStruct.html#a2338e55012df6bf152d11b706324ccdd">origin</a>;
<a name="l00120"></a><a class="code" href="structplayerMove_1_1playerStruct.html#ab45368a0c2a6e167829d6a667af9ae19">00120</a>         <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playerStruct.html#ab45368a0c2a6e167829d6a667af9ae19">bSnap</a>;
<a name="l00121"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a04add2c9f4f7c61d9ab5dc874c28a92c">00121</a>         <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a04add2c9f4f7c61d9ab5dc874c28a92c">snappingImplemented</a>;
<a name="l00122"></a><a class="code" href="structplayerMove_1_1playerStruct.html#aed80b23e3c6019d420bb71fce994c489">00122</a>         <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playerStruct.html#aed80b23e3c6019d420bb71fce994c489">counter</a>;
<a name="l00123"></a><a class="code" href="structplayerMove_1_1playerStruct.html#ac9326788ac14315eb7724ad819c3e58b">00123</a>                 <span class="keywordtype">float</span> <a class="code" href="structplayerMove_1_1playerStruct.html#ac9326788ac14315eb7724ad819c3e58b">gravity</a>; <span class="comment">// default = 800</span>
<a name="l00124"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a8d5dee62f5a70f14475a52c4695e1566">00124</a>                 <span class="keywordtype">float</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a8d5dee62f5a70f14475a52c4695e1566">speed</a>; <span class="comment">// default = 320</span>
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a2fa3c02f9818d436171f56177272a143">00126</a>                 <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a2fa3c02f9818d436171f56177272a143">commandTime</a>; <span class="comment">// the time at which this command was issued (in milliseconds)</span>
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="structplayerMove_1_1playerStruct.html#ae3f5b8273f49106eee6e3b29525cb864">00128</a>                 <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playerStruct.html#ae3f5b8273f49106eee6e3b29525cb864">pm_time</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="structplayerMove_1_1playerStruct.html#ab113fc36a71188bf48c4e6d930d3a239">00130</a>                 Ogre::Vector3 <a class="code" href="structplayerMove_1_1playerStruct.html#ab113fc36a71188bf48c4e6d930d3a239">viewangles</a>;
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a7404d961d37203bb3e8f00f2a37d6c64">00132</a>                 <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a7404d961d37203bb3e8f00f2a37d6c64">groundEntityNum</a>;
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a02ba92eba8ea718984e099ea8afb9981">00134</a>                 <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a02ba92eba8ea718984e099ea8afb9981">pmove_framecount</a>;
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="structplayerMove_1_1playerStruct.html#aabf073574963f29270b3c178032978da">00136</a>                 <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playerStruct.html#aabf073574963f29270b3c178032978da">watertype</a>;
<a name="l00137"></a><a class="code" href="structplayerMove_1_1playerStruct.html#ac223753902da9476853c3f39d404ceef">00137</a>                 <a class="code" href="pmove_8h.html#a0cdd2f56f3499e403be5f4c3705e54f5">waterlevel_t</a> <a class="code" href="structplayerMove_1_1playerStruct.html#ac223753902da9476853c3f39d404ceef">waterlevel</a>;
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a69f0e7575a42c36ba82d9f18c7b51987">00139</a>                 <span class="keywordtype">signed</span> <span class="keywordtype">short</span> <a class="code" href="structplayerMove_1_1playerStruct.html#a69f0e7575a42c36ba82d9f18c7b51987">delta_angles</a>[3];
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a19e346f4f0d652912afb48f36491a630">00141</a>                 <a class="code" href="pmove_8h.html#a987ad16a14ce69f3f0b67733ac1b25b0">pmtype_t</a> <a class="code" href="structplayerMove_1_1playerStruct.html#a19e346f4f0d652912afb48f36491a630">move_type</a>;
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="structplayerMove_1_1playerStruct.html#af1ba6190b26f5b1d63d031e947de83f7">00143</a>                 <span class="keywordtype">float</span> <a class="code" href="structplayerMove_1_1playerStruct.html#af1ba6190b26f5b1d63d031e947de83f7">last_compute_time</a>;
<a name="l00144"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a1e4a7c2baac715883856d144807eda6e">00144</a>                 Ogre::Vector3 <a class="code" href="structplayerMove_1_1playerStruct.html#a1e4a7c2baac715883856d144807eda6e">lastframe_origin</a>;
<a name="l00145"></a><a class="code" href="structplayerMove_1_1playerStruct.html#a88bc637c3ce84abf9d7fe75f2f6b6fd2">00145</a>                 Ogre::Vector3 <a class="code" href="structplayerMove_1_1playerStruct.html#a88bc637c3ce84abf9d7fe75f2f6b6fd2">lerp_multiplier</a>;
<a name="l00146"></a>00146         } <a class="code" href="structplayerMove.html#a0d135f0ca7ddebf1034efff9bebd5b9f">ps</a>;
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="structplayerMove_1_1playercmd.html">00148</a>         <span class="keyword">struct </span><a class="code" href="structplayerMove_1_1playercmd.html">playercmd</a>
<a name="l00149"></a>00149         {
<a name="l00150"></a><a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47">00150</a>                 <span class="keyword">enum</span> <a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47">CMDstateChange</a>
<a name="l00151"></a>00151                 {
<a name="l00152"></a><a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a179cdf1cf416a5fe5cb9e84decda2140">00152</a>                         <a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a179cdf1cf416a5fe5cb9e84decda2140">NO_CHANGE</a>,
<a name="l00153"></a><a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a69ff6b03bae773c4a63d64b603e76d46">00153</a>                         <a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a69ff6b03bae773c4a63d64b603e76d46">KEYDOWN</a>,
<a name="l00154"></a><a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a968b18e8f9b8cda7125105a562405eea">00154</a>                         <a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a968b18e8f9b8cda7125105a562405eea">KEYUP</a>
<a name="l00155"></a>00155                 };
<a name="l00156"></a>00156 
<a name="l00157"></a><a class="code" href="structplayerMove_1_1playercmd.html#aee8b8a00184eaf9eb8605a3db8bef4ee">00157</a>                 <a class="code" href="structplayerMove_1_1playercmd.html#aee8b8a00184eaf9eb8605a3db8bef4ee">playercmd</a>() : <a class="code" href="structplayerMove_1_1playercmd.html#a9d347d022c12f33e12653560f7d513a0">forwardmove</a>(0), <a class="code" href="structplayerMove_1_1playercmd.html#ad93eb14bddc4210acb61ac00773276e0">rightmove</a>(0), <a class="code" href="structplayerMove_1_1playercmd.html#a3449d959b7ca0863b0d3f252fbddce31">upmove</a>(0), <a class="code" href="structplayerMove_1_1playercmd.html#a310823cb4d375fbcc34d67aec4d7fc96">serverTime</a>(50), <a class="code" href="structplayerMove_1_1playercmd.html#a51f4498ecc1f9981e11a39fc4c423da1">ducking</a>(false), 
<a name="l00158"></a>00158                         <a class="code" href="structplayerMove_1_1playercmd.html#ac67a193c3a61e560a89677d3807976fd">activating</a>(false), <a class="code" href="structplayerMove_1_1playercmd.html#ac9dcf76d0678a7b47842d8367f3e7f1e">lastActivatingState</a>(false), <a class="code" href="structplayerMove_1_1playercmd.html#a297a6946679e79fdedcfd7cd658353ed">procActivating</a>(<a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a179cdf1cf416a5fe5cb9e84decda2140">NO_CHANGE</a>),
<a name="l00159"></a>00159                         <a class="code" href="structplayerMove_1_1playercmd.html#ac5297b614d4a19b2466d92a7c1e67498">dropping</a>(false), <a class="code" href="structplayerMove_1_1playercmd.html#a5a7c1770aca0c2fa04aff8285085c290">lastDroppingState</a>(false), <a class="code" href="structplayerMove_1_1playercmd.html#af550ff69b2a271d998efd08edfd08ecd">procDropping</a>(<a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47a179cdf1cf416a5fe5cb9e84decda2140">NO_CHANGE</a>)
<a name="l00160"></a>00160                 {
<a name="l00161"></a>00161                         <a class="code" href="structplayerMove_1_1playercmd.html#a874cf7cd67d6e785210a78bb40cce2e5">angles</a>[0] = <a class="code" href="structplayerMove_1_1playercmd.html#a874cf7cd67d6e785210a78bb40cce2e5">angles</a>[1] = <a class="code" href="structplayerMove_1_1playercmd.html#a874cf7cd67d6e785210a78bb40cce2e5">angles</a>[2] = 0;
<a name="l00162"></a>00162                 }
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="structplayerMove_1_1playercmd.html#a310823cb4d375fbcc34d67aec4d7fc96">00164</a>                 <span class="keywordtype">int</span> <a class="code" href="structplayerMove_1_1playercmd.html#a310823cb4d375fbcc34d67aec4d7fc96">serverTime</a>;
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="structplayerMove_1_1playercmd.html#a874cf7cd67d6e785210a78bb40cce2e5">00166</a>                 <span class="keywordtype">short</span> <a class="code" href="structplayerMove_1_1playercmd.html#a874cf7cd67d6e785210a78bb40cce2e5">angles</a>[3];
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="structplayerMove_1_1playercmd.html#a9d347d022c12f33e12653560f7d513a0">00168</a>                 <span class="keywordtype">signed</span> <span class="keywordtype">char</span> <a class="code" href="structplayerMove_1_1playercmd.html#a9d347d022c12f33e12653560f7d513a0">forwardmove</a>;
<a name="l00169"></a><a class="code" href="structplayerMove_1_1playercmd.html#ad93eb14bddc4210acb61ac00773276e0">00169</a>                 <span class="keywordtype">signed</span> <span class="keywordtype">char</span> <a class="code" href="structplayerMove_1_1playercmd.html#ad93eb14bddc4210acb61ac00773276e0">rightmove</a>;
<a name="l00170"></a><a class="code" href="structplayerMove_1_1playercmd.html#a3449d959b7ca0863b0d3f252fbddce31">00170</a>                 <span class="keywordtype">signed</span> <span class="keywordtype">char</span> <a class="code" href="structplayerMove_1_1playercmd.html#a3449d959b7ca0863b0d3f252fbddce31">upmove</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="structplayerMove_1_1playercmd.html#a51f4498ecc1f9981e11a39fc4c423da1">00172</a>                 <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playercmd.html#a51f4498ecc1f9981e11a39fc4c423da1">ducking</a>;
<a name="l00173"></a><a class="code" href="structplayerMove_1_1playercmd.html#ac67a193c3a61e560a89677d3807976fd">00173</a>                 <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playercmd.html#ac67a193c3a61e560a89677d3807976fd">activating</a>; <span class="comment">// if the user is holding down the activate button</span>
<a name="l00174"></a><a class="code" href="structplayerMove_1_1playercmd.html#ac5297b614d4a19b2466d92a7c1e67498">00174</a>                 <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playercmd.html#ac5297b614d4a19b2466d92a7c1e67498">dropping</a>; <span class="comment">// if the user is dropping an item</span>
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="structplayerMove_1_1playercmd.html#ac9dcf76d0678a7b47842d8367f3e7f1e">00176</a>                 <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playercmd.html#ac9dcf76d0678a7b47842d8367f3e7f1e">lastActivatingState</a>;
<a name="l00177"></a><a class="code" href="structplayerMove_1_1playercmd.html#a5a7c1770aca0c2fa04aff8285085c290">00177</a>                 <span class="keywordtype">bool</span> <a class="code" href="structplayerMove_1_1playercmd.html#a5a7c1770aca0c2fa04aff8285085c290">lastDroppingState</a>;
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="structplayerMove_1_1playercmd.html#a297a6946679e79fdedcfd7cd658353ed">00179</a>                 <a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47">CMDstateChange</a> <a class="code" href="structplayerMove_1_1playercmd.html#a297a6946679e79fdedcfd7cd658353ed">procActivating</a>;
<a name="l00180"></a><a class="code" href="structplayerMove_1_1playercmd.html#af550ff69b2a271d998efd08edfd08ecd">00180</a>                 <a class="code" href="structplayerMove_1_1playercmd.html#a3997b05e8a0116936535fc2805702a47">CMDstateChange</a> <a class="code" href="structplayerMove_1_1playercmd.html#af550ff69b2a271d998efd08edfd08ecd">procDropping</a>;
<a name="l00181"></a>00181         } <a class="code" href="structplayerMove.html#a795b7ed7480e56e62862344e3886a6da">cmd</a>;
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="structplayerMove.html#a25f96d2b09921b1e8185aca75b1f5a68">00183</a>         <a class="code" href="structplayerMove.html#a25f96d2b09921b1e8185aca75b1f5a68">playerMove</a>() : <a class="code" href="structplayerMove.html#ae89ff9f7ae5188f4b4ba472502c9294e">msec</a>(50), <a class="code" href="structplayerMove.html#a100b61f006ab3927f333a0c6ee41d1b6">pmove_fixed</a>(false), <a class="code" href="structplayerMove.html#abc12fe662e201b9e0b7080a47640dd7b">pmove_msec</a>(50), <a class="code" href="structplayerMove.html#a47b032402a518f7c4b29018bd0a80dde">waterHeight</a>(0), <a class="code" href="structplayerMove.html#a1f02341f6a3557081272014aa91fc873">isInterior</a>(true), <a class="code" href="structplayerMove.html#a0eca4fdd49d5eee95e42a7d413620d3c">hasWater</a>(false)
<a name="l00184"></a>00184         {
<a name="l00185"></a>00185         }
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="structplayerMove.html#ae89ff9f7ae5188f4b4ba472502c9294e">00187</a>         <span class="keywordtype">int</span> <a class="code" href="structplayerMove.html#ae89ff9f7ae5188f4b4ba472502c9294e">msec</a>;
<a name="l00188"></a><a class="code" href="structplayerMove.html#abc12fe662e201b9e0b7080a47640dd7b">00188</a>         <span class="keywordtype">int</span> <a class="code" href="structplayerMove.html#abc12fe662e201b9e0b7080a47640dd7b">pmove_msec</a>;
<a name="l00189"></a><a class="code" href="structplayerMove.html#a100b61f006ab3927f333a0c6ee41d1b6">00189</a>         <span class="keywordtype">bool</span> <a class="code" href="structplayerMove.html#a100b61f006ab3927f333a0c6ee41d1b6">pmove_fixed</a>;
<a name="l00190"></a><a class="code" href="structplayerMove.html#a47b032402a518f7c4b29018bd0a80dde">00190</a>         <span class="keywordtype">int</span> <a class="code" href="structplayerMove.html#a47b032402a518f7c4b29018bd0a80dde">waterHeight</a>;
<a name="l00191"></a><a class="code" href="structplayerMove.html#a0eca4fdd49d5eee95e42a7d413620d3c">00191</a>         <span class="keywordtype">bool</span> <a class="code" href="structplayerMove.html#a0eca4fdd49d5eee95e42a7d413620d3c">hasWater</a>;
<a name="l00192"></a><a class="code" href="structplayerMove.html#a1f02341f6a3557081272014aa91fc873">00192</a>         <span class="keywordtype">bool</span> <a class="code" href="structplayerMove.html#a1f02341f6a3557081272014aa91fc873">isInterior</a>;
<a name="l00193"></a>00193         <span class="comment">//Object* traceObj;</span>
<a name="l00194"></a><a class="code" href="structplayerMove.html#aad2c256b50075622aea933e165088908">00194</a>         <a class="code" href="classOEngine_1_1Physic_1_1PhysicEngine.html">OEngine::Physic::PhysicEngine</a>* <a class="code" href="structplayerMove.html#aad2c256b50075622aea933e165088908">mEngine</a>;
<a name="l00195"></a>00195 };
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="keywordtype">void</span> <a class="code" href="pmove_8cpp.html#a26cfb85bcc0ebd4f45bf329acd033e90">Pmove</a> (<a class="code" href="structplayerMove.html">playerMove</a>* <span class="keyword">const</span> pmove);
<a name="l00198"></a>00198 <span class="keywordtype">void</span> <a class="code" href="pmove_8cpp.html#a7dc5b7ac86acee2c12ebf9133b6213b9">Ext_UpdateViewAngles</a>(<a class="code" href="structplayerMove.html">playerMove</a>* <span class="keyword">const</span> <a class="code" href="pmove_8cpp.html#a1158fe597f974549a024e443e2cb43f6">pm</a>);
<a name="l00199"></a>00199 <span class="keywordtype">void</span> <a class="code" href="pmove_8cpp.html#a9b8b1a07520fe974924c2bbc87c646a2">AngleVectors</a>( <span class="keyword">const</span> Ogre::Vector3&amp; angles, Ogre::Vector3* <span class="keyword">const</span> forward, Ogre::Vector3* <span class="keyword">const</span> right, Ogre::Vector3* <span class="keyword">const</span> up) ;
<a name="l00200"></a>00200 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri May 25 15:23:23 2012 for OpenMW by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
